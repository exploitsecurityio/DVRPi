# Hidden Treasure Challenge Write-Up

## Overview
**Challenge Name**: Hidden Treasure  
**Difficulty**: Intermediate  
**Category**: Hardware/Forensics  
**Goal**: Find a flag hidden in a concealed partition on the SD card.

## What Youâ€™ll Need
- SD card reader.
- Linux system (e.g., Kali) with `fdisk`, `parted`, `testdisk`.
- UART-to-USB adapter (GPIO 4: RX, 6: Ground, 8: TX; 115200 baud).
- Terminal emulator (`minicom`).
- Wi-Fi client (SSID: `DVRPI`, password: `dvrpiconnect`).
- Optional: Virtual machine for disk image analysis.

## Challenge Description
The SD card contains a hidden partition with a flag. A clue in `/home/user/clue.txt` hints at looking beyond the visible filesystem. Analyze the SD card to find and access the flag.

## How to Solve It
1. **Connect to Pi**:
   - Join Wi-Fi: SSID `DVRPI`, password `dvrpiconnect`.
   - Connect via UART: `minicom -D /dev/ttyUSB0 -b 115200` or SSH: `ssh root@192.168.4.1`.
2. **Read Clue**:
   ```bash
   cat /home/user/clue.txt
   # Hint: Look beyond the visible filesystem
   ```
3. **Analyze SD Card**:
   - Remove SD card, insert into Linux host, or use SSH on Pi.
   - Check partitions:
     ```bash
     sudo fdisk -l /dev/sdX
     # Look for /dev/sdX3 (hidden FAT32)
     ```
4. **Mount Hidden Partition**:
   ```bash
   sudo mount /dev/sdX3 /mnt
   cat /mnt/flag.txt
   # Should show: FLAG{YouFoundTheHiddenPartition!}
   ```
5. **Alternative: Use Testdisk**:
   ```bash
   sudo testdisk /dev/sdX
   # Analyse, recover /dev/sdX3, mount as above
   ```
6. **Submit Flag**:
   ```bash
   ssh root@192.168.4.1
   /usr/local/bin/submit_flag.sh FLAG{YouFoundTheHiddenPartition!}
   ```

## What You Learn
- Disk partitioning and hidden partitions.
- Forensic analysis with `fdisk`, `parted`, `testdisk`.
- SD card analysis techniques.

## Notes
- **GPIO**: Pins 24, 21, 23, 18 (~0.35V) may be faulty.
- For disk image: Use `losetup` to mount `sdcard_backup.img`.
- Check `journalctl -u systemd-udevd` for disk errors.